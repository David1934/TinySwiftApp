10. @2025/07/24 -- version update to 3.1.0_LM20250724A
    redmine_2487: swift rk3568小型化下位机bug fix

    patch set 1 - 5: add replay function for frame raw and depth16 files by the environment variables;
    patch set 6: add build switch STANDALONE_APP_WITHOUT_HOST_COMMUNICATION;
    patch set 7: add environment variable 'dump_walkerror_param_count' to dump walk error parameters;
    patch set 8: bugfix: no depth16 data is reported to PC SpadisApp sometimes, reason is delete ADAPS_DTOF class 
       but not set adaps_dtof = NULL_POINTER in ~FrameProcessThread();
    patch set 9: add frame drop check with the environment variable 'frame_drop_check_enable';
    patch set 10: move some struct variables from dtof_frame_decode() to class ADAPS_DTOF;
    patch set 11: add dump_frame_headinfo() for debug;
    patch set 13: add adapsSpodOffsetDataLength and walk_error_para_list_length for SetWrapperParam;
    patch set 14: add 'utils = new Utils();' on V4L2() to avoid NULL point error for utils;
    patch set 15: add update_eeprom_data function;
    patch set 16: use loaded data if any, do not depend on is_roi_sram_rotate any more;
    patch set 18: add CMD_HOST_SIDE_SET_DEVICE_REBOOT cmd, add device side fw version report to SpadisApp at CMD_HOST_SIDE_GET_MODULE_STATIC_DATA;
    patch set 19: update SpadisQT version to 3.1.0;
    patch set 20-21: improve exit(close and destructor) handle to try to avoid SpadisQT hang issue;

    1. bugfix: 修复偶尔不上报depth16数据给上位机SpadisApp的问题
    2. feature: 增加命令处理eeprom数据更新，和更新成功下位机重启
    3. improve: 修改下位机的实现逻辑，如果SpadisApp有下载walkerror/roi sram/offset数据，会优先使用加载的数据，即使没有开启ROI轮询；
    4. feature: 增加下位机4个软件部件（ads6401驱动,算法库,sender通讯库,SpadisQT应用）版本的上报给SpadisApp, 以便在PC端显示，以备用户查看
    5. improve: 增强一些调试功能，丢帧监测，mipi raw data头打印等
    6. improve: 优化关闭退出处理代码，尝试解决偶尔地SpadisQT进程挂死的问题；

9. @2025/06/24 -- version update to 3.0.0_LM20250624A
    redmine_2487: swift rk3568小型化下位机bug fix

    patch set 1: 散点模组小型化整机，PC端SpadisApp首次链接下位机回放正常，第2次试图链接，显示黑屏。
    patch set 2: improve roiCoordinatesDumpCheck() and multipleRoiCoordinatesDumpCheck(), reduce the array size of frameCoordinatesMap;
    patch set 3: add communication commands to load walkerror and offset data from PC SpadisApp for ROI SRAM rotation function;
    patch set 4: add CMD_HOST_SIDE_SET_WALKERROR_ENABLE (waiting for algo lib add walkerror_enable in AdapsParamAndOutForProcessEveryFrame);
    patch set 5: rename NO_UI_APPLICATION to CONSOLE_APP_WITHOUT_GUI;
    patch set 6: allow only one instance of this app be run;
    patch set 8: to get the right exposure_period/ptm_coarse_exposure_value/ptm_fine_exposure_value for adaps_dtof.cpp and SpadisApp of PC side;
    patch set 9: try to re-read eeprom data if failure at SpadisQT startup (kernel fail at probe());

    1. bugfix: 散点模组小型化整机，PC端SpadisApp首次链接下位机回放正常，第2次试图链接，显示黑屏；
    2. feature: 增加与上位机的通讯命令，接收SpdadisApp加载walkerror和offset数据（ROI轮询功能）；
    3. improve: 增加运行实例检查，只运行一个实例运行，避免一些错误；
    4. bugfix: 调整下位机SpadisQT启动的步骤，以便能正确获得下位机的配置参数exposure_period, coarse_exposure_time, fine_exposure_time等；
    5. improve: 如果在出图前尚未成功读取模组eeprom数据，尝试重新读取；
    6. feature: 增加与上位机的通讯命令，允许用户在出图过程中开或关walkerror（待算法库修改尚未完成）
    

8. @2025/06/14 -- version update to 3.0.0_LM20250614A
    redmine_2428: SpadisQT 小面阵模组ROI sram轮询功能重新适配 及 优化
    http://gerrit.adaps.corp/c/SpadisQT/+/4857
    
    patch set 1: correct a typo for color map conversion algo from PC SpadisApp;
    patch set 2: add dumpSpotCount() with environment variable 'dump_spots_interval_by_confidence';
    patch set 3-5: add roiCoordinatesDumpCheck() and multipleRoiCoordinatesDumpCheck() to valid check and print ROI sram coordinates map;
    patch set 6: change the return type from void to int for initParams() to return failure if p_eeprom_param is NULL;
    patch set 7: re-adapt the area algo lib version per dongshuai's update;
    patch set 8: for flood algo lib, pRawData and rawDataSize are used for ROI sram and its size, add CMD_DEVICE_SIDE_ERROR_CAPTURE_ABORT for device side capture abort;
    patch set 11: force setparam->walkerror = false since No walk error parameters in eeprom for flood module;
    patch set 12: add depthMapDump() to debug ROI sram rotation function;
    patch set 13: improve dumpSpotCount();
    patch set 14: implement loaded config from SpadisApp => SpadisQT => ads6401.c driver to running-time support ROI SRAM rotation or not?
    patch set 15: add roi_sram_rotate_data_injection() for self-test before SpadisApp adding ROI SRAM send-down function;
    patch set 16: bugfix: SpadisQT hung because the member variable sensor_reg_setting_cnt of the class was not initialized to 0 in the constructor, and it was not 0 when unassigned;
    patch set 18: fix build error in deepin Linux on PC;
    
    1. 增加dumpSpotCount()、roiCoordinatesDumpCheck()，以便打印ROI sram的有效点坐标map
    2. 增加depthMapDump()打印decode后深度图的map(根据置信度显示H/M/L)
    3. 小面阵模组，通过pRawData 和 rawDataSize告诉算法库完整ROI sram数据的首地址和长度(ROI轮询时可能18K多)
    4. 小面阵模组，walkerror强制为false,因为它的eeprom里没有walkerror数据
    5. 实现同一套固件(SpadisQT 和 boot.img), 支持小面阵ROI 轮询和非轮询（下位机根据环境变量，可注入测试数据）
    6. 完善错误和异常的状态上报给SpadisApp


7. @2025/05/29 -- version update to 3.0.0_LM20250529A
    redmine #2334: swift下位机应用SpadisQT接入sender与PC端SpadisApp通讯
    http://gerrit.adaps.corp/c/SpadisQT/+/4759

    patch set 2: implement Host_Communication class (Singleton mode);
    patch set 4: remove the dependent for rk-camera-module.h for better portability in the future;
    patch set 5-6: start to implement start_capture/stop_capture/send_frame_raw_data functions;
    patch set 7: parse the input parameter for CMD_TYPE_CLIENT_START_CAPTURE command;
    patch set 8: change ~Host_Communication() to public to be able to delete Host_Communication class and sender_destroy() when exit;
    patch set 10: change build switch RUN_ON_ROCKCHIP to RUN_ON_EMBEDDED_LINUX;
    patch set 11: set the framerate type from GUI or host request, 30 fps by default;
    patch set 12: Only when host is connected, and the capture request is from host, SpadisQT send eeprom/raw data to PC host side;
    patch set 15: add Host_Communication::dump_buffer_data() to debug host-device communication;
    patch set 16-17: improve code to debug host-device communication;
    patch set 18: work mode can be passed from PC side to device side;
    patch set 19: add eeprom_calib_param_t to report eeprom capacity and module type at the same time;
    patch set 20: update frame_buffer_param_t data structure to pass more info;
    patch set 21: improve code to debug depth16 output abnormal issue;
    patch set 22: bugfix: setparam->calibrationInfo should use device info,which include calibrate version info;
    patch set 23-25: add register read/write command for host;
    patch set 26-28: add config script load mode from PC SpadisApp;
    patch set 30: bugfix: When the last line of the script file does not have a newline character, an error occurs while reading the last line;
         (Original text: "I2C_Write, 31, 5D, 20"; misread as "I2C_Write, 31, 5D,2C")
                  set frame_parameters.focusRoi parameter values to fix depth display missing some columns at the right side;
    patch set 31: add host_comm::report_error_msg(), and report error if execute ADTOF_SET_EXTERNAL_CONFIG_SCRIPT failure;
    patch set 33: rename ADTOF_SET_SENSOR_REGISTER/ADTOF_GET_SENSOR_REGISTER to ADTOF_SET_DEVICE_REGISTER/ADTOF_GET_DEVICE_REGISTER to support multiple i2c address with the unified REGISTER read/write ioctl commands;
    patch set 34: add ptm_fine_exposure_value and exposure_period for frame_buffer_param_t;
    patch set 35: start add Delay and Block_Write command support for script_load mode;
    patch set 36: start to modify code to add some member variables for report_module_calibrate_data() and swift_start_capture();
    patch set 37: separate the v4l2 class from the misc_device class to allow for some preparatory work to be done before starting capture;
    patch set 42: debug ran wild (or went out of control) bug in the function report_module_static_data();`
    patch set 43: add dump parameters function with some environment variables;
    patch set 44-45: start to add scipt load support for ads6401 flood module;
    patch set 46: fix all build warning and errors on rk3568 and PC deepin Linux;
    patch set 47: check '(false == connected || false == sender_is_working())' before sending a buffer to PC side;
    patch set 48, add environment variable 'skip_frame_decode', the origianl 'skip_frame_process' is used for whole frame process skip;
    patch set 50: script load mode: Delay command parse & add, handle empty line in the middle of the script files correctly;
    patch set 51: send decoded frame depth16 data to PC side if req_out_data_type include these frame data types;
    patch set 53: sync color map conversion from depth to color with PC SpadisApp, add CMD_HOST_SIDE_SET_COLORMAP_RANGE_PARAM cmd to update device side's setting from the PC side;
    patch set 55: when capture req from host side, pass some parameters to algo decode lib in adaps_dtof.cpp;

    1. 去除对rk-camer-module.h文件的引用，修改编译开关RUN_ON_ROCKCHIP to RUN_ON_EMBEDDED_LINUX，使SpadisQT更容易适配到其他SoC平台；
    2. 增加Host_Communication类，用来实现与上位机SpadisApp通讯;
    3. 增加misc_device类，以便在SpadisQT一启动，就从Linux驱动ads6401.c里读取eeprom等常量数据，做好准备；
    4. 实现CMD_DEVICE_SIDE_REPORT_MODULE_STATIC_DATA/CMD_DEVICE_SIDE_REPORT_FRAME_RAW_DATA/CMD_DEVICE_SIDE_REPORT_FRAME_DEPTH16_DATA等命令，
       根据CMD_HOST_SIDE_START_CAPTURE命令的请求参数req_out_data_type的值，上报期望的各种frame data(raw, depth16);
    5. 实现CMD_DEVICE_SIDE_REPORT_ERROR错误报告，以便上位机获悉和显示下位机的错误；
    6. 实现读写模组寄存器功能的功能；
    7. 实现PC端脚本加载功能：在响应CMD_HOST_SIDE_START_CAPTURE命令时，可解析可能携带的寄存器脚本并下发到ads6401.c驱动去配置swift模
       组(sensor + vcsel driver, 散点+小面阵模组)，脚本文件支持Unix/Dos/Mac格式行尾符，支持末行没有行尾符，中间包含换行符等；
    8. 同步上位机SpadisApp里depth转换为rgb image算法，同时实现CMD_HOST_SIDE_SET_COLORMAP_RANGE_PARAM命令，以便将SpadisApp的colormap用户调整值
       实时传给下位机，更新距离显示范围；
    9. 在上位机SpadisApp未打开或未链接时，下位机可独立运行和显示；
    10. 实现从用户层加载ROI数据(因为上位机SpadisApp尚未实现，该功能尚未测试验证）

6. @2025/04/22 -- version update to 2.3.0_LM20250422A
    redmine #2264: SpadisQT 增加置信度bitmap图，增加单点深度显示，界面上增加工作模式选择等
    http://gerrit.adaps.corp/c/SpadisQT/+/4698

    patch set 1-2: add build switch NO_UI_APPLICATION to build into a console application for performance optimaze and test;
    patch set 3: add confidence map display for debug;
    patch set 4: add informat(depth/rgb) display for a specific watch point;
    patch set 9: If no work mode is specified via cmd-line parameters, enter UI to wait user to select a work mode & environment type;
    patch set 10: enable start/stop repeatly, and adjust UI layout;
    patch set 11: add cmd line parameters etype and mtype to specify the environment and measurement type;
    patch set 13: sync CHIP_TEMPERATURE_MAX_THRESHOLD to 90 with swfit algo lib, add md5 check for FHR raw data when test pattern enabled;

    已知问题：
      FHR模式，首次按START按钮出图正常，STOP后再次START深度图偏红，confidence图偏蓝。
      已核对寄存器正常，test pattern使能时RAW data输出未变，但是深度图显示还是异常，初步判断可能算法库有变量未复位到初始值。

5. @2025/03/26 -- version update to 2.2.0_LM20250326A
    redmine #2222: SpadisQT: 更新EEPROM数据结构到最新64K版本，增加misc device提高软件灵活性
    http://gerrit.adaps.corp/c/SpadisQT/+/4628

    patch set 2: add mmap for eeprom data since 64K eeprom is too big for ioctl command;
    patch set 6: enable multi-thread and neom support for algo lib in adapsdepthsettings.xml;
    patch set 7: use depthInput.in_image_size to pass the frame buffer size for raw data to 
       the algo lib, multi-thread need know it;
    patch set 8: use environment varibles to control mirror x and y;
    patch set 10: update the UI screen (better display effect) to 1520x1080 to fit the rotated screen;
    patch set 11: add an environment varible to disable walk_error process;
    patch set 12: set_param.peak_index = 1 and TimeBinInterval to 500(192 bins) to reach 60 fps;
    patch set 13: always use Outdoot FHR mode now according to qinyu;
    patch set 14: add adaps_dtof->adaps_dtof_release() --> DepthMapWrapperDestroy(m_handlerDepthLib) 
      when exit from SpadisQT;
    patch set 15: adjust UI layout, and fix build error on PC Deepin Linux system;
    patch set 16: add the macro definition SWIFT_MODULE_TYPE_NAME, to simply the code;
    patch set 17: move ADAPS ioctl command to misc_device to set PVDD voltage value before the sensor 
      v4l2-subdevice power-on;
    
    1. 增加misc device (/dev/ads6401_spot 或 /dev/ads6401_flood), 添加mmap支持，以便从eeprom读
       出来的标定数据在用户层和驱动层共享（0拷贝），_IOR宏定义中size是14 bits,最大16K bytes,
       无法再支持64K bytes的eeprom数据传输；
    2. 将我们新增的ioctl命令，从sensor_ioctl()移到misc_ioctl(), 以便在dToF sensor上电前能做一
       些准备工作（比如读取eeprom数据、配置环境类型，测量类型等），outdoor模式pvdd需要高一点的
       电压，需要在上电前获得这个信息；
    3. 更新EEPROM数据结构到最新64K版本，关键是增加了walkerror参数信息，新增crc8算法（已与欧菲同步），
       但是以下几个字段crc8 不匹配，可能欧菲有更新数据但是忘记更新crc8的值？
        ERROR: <v4l2.cpp-check_crc32_4_dtof_calib_eeprom_param() 495> 3.Checksum intrinsic (offset:4160, length: 36) validation fail.
        ERROR: <v4l2.cpp-check_crc32_4_dtof_calib_eeprom_param() 558> 12.Checksum SpotEnergy (offset:47104, length: 3840) validation fail.
        ERROR: <v4l2.cpp-check_crc32_4_dtof_calib_eeprom_param() 565> 13.Checksum noise (offset:54784, length: 10732) validation fail.
        ERROR: <v4l2.cpp-check_crc32_4_dtof_calib_eeprom_param() 572> 14.Checksum checksum_all validation fail.
    4. 因为rk3568的屏是类似于手机屏，原本是纵向显示的，SpadisQT界面显示好小，秦宇建议旋转90度，通过下列命令可将屏幕旋转270度，
       同时调整mainwindow.ui的布局大小，大部分控件调大后，比原来更好看一些；
         rk3568开发板屏幕桌面如何旋转90度？
            cat /sys/kernel/debug/dri/0/summary
            查看Connector名字，旋转如：
            echo "output:DSI-1:rotate270" > /tmp/.weston_drm.conf
            等待界面刷新
    5. FHR模式60 fps验证（ad6401.c编译开关FRAMERATE_TEST_4_60FPS缺省不打开）
       a. fine曝光时间改为0x01(kernel space ads6401.c驱动)
       b. mipi速率提高为1.5G(kernel space ads6401.c驱动)
       c. 算法库支持多线程
       d. 算法库卷积使用neom
       e. 384 bins改成192 bins (XML里TimeBinInterval从250改成500)

4. @2025/03/20 -- version update to 2.1.0_LM20250124A
    redmine #2242: [宇树科技需求] swift 60FPS支持的验证
    http://gerrit.adaps.corp/c/SpadisQT/+/4500
    
    1. 在FrameProcessThread::run()中，QThread::msleep(1)替换为QThread::usleep(10),减少delay,提高帧率；
    2. 增加SpadisQT_release.sh脚本

3. @2025/01/24 -- version update to 2.1.0_LM20250124A
    redmine #1863: swift ROI动态修改速度验证
    http://gerrit.adaps.corp/c/SpadisQT/+/4408

    patch set 5: update the min and max temperature to 15 and 100 degree to sync with swift algo lib;
    patch set 8: add DepthBufferMerge for ENABLE_DYNAMICALLY_UPDATE_ROI_SRAM_CONTENT;

    要使能动态更新ROI sram内容和切换测试，需打开SpadisQT.pro中以下这些编译开关（缺省是关闭的）
#    DEFINES += CONFIG_ADAPS_SWIFT_FLOOD
#    DEFINES += ENABLE_DYNAMICALLY_UPDATE_ROI_SRAM_CONTENT

2. @2025/01/14 -- version update to 2.1.0_LM20250114A
    redmine #2058: 散点swift模组在rk3568 Linux开发板上的适配
    http://gerrit.adaps.corp/c/SpadisQT/+/4380

    patch set 1: improve Linux signal handle for user signal 1,2, CTRL-C;
    patch set 3: rename the ioctl commands's names and the related structs' names to improve the code readability;
    patch set 5: rename some functions to improve the code readability;

1. @2025/01/08 -- version update to 2.0.1_LM20250108A
    redmine #1863: swift ROI动态修改速度验证1(由于swift算法库尚未修改，ROI sram测试尚不完整)
    http://gerrit.adaps.corp/c/SpadisQT/+/4314

patch set 1: add inside_temperature display on the GUI of SpadisQT;
patch set 2: MACRO rename: AD4001_EEPROM_SPODOFFSET_OFFSET -> AD4001_EEPROM_SPOTOFFSET_OFFSET, 
             AD4001_EEPROM_SPODPOS_OFFSET -> AD4001_EEPROM_ROISRAM_DATA_OFFSET;
patch set 3: add environment variable to control compose_subframe and expand_pixel;
patch set 5: display pure RED or BLUE color for PTM and GRAY-SCALE mode when the environment varible 'skip_frame_process' is set to true;
patch set 6: move build switch 'RUN_ON_ROCKCHIP' to SpadisQT.pro (Makefile) file to quick switch between Linux PC and embedded Linux;
patch set 7: correct a minor mistake in adaps_chkEEPROMChecksum();
patch set 8: add NULL check for some pointers, enable run on PC Linux (deepin 23);
patch set 12: rename some macros for eeprom structure definition to get better readability;
patch set 13: adjust the UI layout to show inside temperature fullly;
patch set 14: add expected Vop, PVDD display on UI;
patch set 15: Use custom struct types status_param1 and status_param2 as parameters for QT signals and slot functions to facilitate the addition or removal of more variables if need;
patch set 17: improve Linux signal handle for abnormal and user signal 1-2;
patch set 19: rename majorimageprocessingthread to FrameProcessThread;
patch set 20: add Ctrl-Z to capture the current window(debug useful feature)